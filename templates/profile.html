{% extends "base.html" %}
{% block title %} Profile {% endblock %}
{% block head %}
{%endblock%}


        {% block content %}
           {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div id="messages">
                    {% for msg in messages %}
                        <p>{{msg}}</p>
                    {% endfor %}
                    </div>
                {% endif %}
             {% endwith %}
                <!-- Display info about the user show reshall and avail if student -->
                <div>
                    Name: {{user.name}}
                    <p>email: {{user.email}}</p>
                    <p>BNumber: {{user.bnumber}}</p>
                    <p>Phone: {{user.phone}}</p>
                </div>
                <button id ="edit-form-btn">Edit Profile Details</button>
                <!--Here when button clicked show form for editing details -->
            <form id="edit-profile-form" style="display: none" method="POST" action="{{url_for('update')}}">
                <p><label for="edit-name">Name:</label>
                <input type="text" id="new-name" name="name" value="{{name}}"></p>
                <p><label for="edit-email">Email:</label>
                <input type="text" id="new-email" name="email" value ="{{email}}" ></p>
                <p><label for="edit-phone">Phone Number:</label>
                <input type="text" id="new-phone" name="phone"></p>
                <p><label for="edit-residence">Residence:</label>
                <input type="text" id="new-residence" name="residence"></p>
                <p><label for="edit-avail">Availability:</label>
                <input type="text" id="new-avail" name="avail"></p>
                <p><input type="submit" value="Submit Changes"></p>
            </form>
        {% endblock %}
        
        {% block script %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
        /* global $ */
            $("#edit-form-btn").on('click', function showEditForm() {
            var x = document.getElementById("edit-profile-form");
            if (x.style.display === "none") {
                x.style.display = "block";
            } 
            else {
                x.style.display = "none";
            }
            });
        </script>
        {% endblock %}